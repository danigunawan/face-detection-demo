(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(t,e,s){"use strict";s.r(e);s(12),s(13);var i=s(10);window.faceapi=i,s(23)},19:function(t,e){},20:function(t,e){},21:function(t,e){},23:function(t,e,s){"use strict";s.r(e);const i=new class{constructor(){}convertStrToBool(t){return"true"===t}getEnv(){return"local"}getDebug(){return this.convertStrToBool("true")}getDebugLandmarks(){return this.convertStrToBool("false")}getDebugMouse(){return this.convertStrToBool("false")}getDebugLogLevel(){return"0"}getDevTriggers(){return["dev","development","local","local"]}findLogLevel(t){switch(t.toLowerCase()){case"states":return 1;case"events":return 2;case"controls":return 3;case"elements":return 4;case"others":return 5;default:return 0}}showMarkers(){return this.showLandmarks()}showLandmarks(){return this.isDebug()&&this.getDebugLandmarks()}showMouse(){return this.isDebug()&&this.getDebugMouse()}isDev(){return this.getDevTriggers().indexOf(this.getEnv().toLowerCase())>=0}isDebug(){return this.getDebug()}};const n=new class{constructor(){}log(t,e){this.canLog(e)&&t&&console.log(t)}canLog(t){let e=i.getDebugLogLevel();return!!i.getDebug()&&(e<0?-1*e==t:t<=e)}};const a=new class{constructor(){this.events=[]}register(t,e){let s=this.findEvent(t);s?s.callbacks.push(e):this.createEvent(t,e)}emit(t,e){let s=this.findEvent(t);s&&(s.callbacks.forEach(t=>{t(e)}),this.log("emit() : Emitting event `"+t+"`!\n"+(void 0!==e?"\nParameters : {"+e+"}":"")))}createEvent(t,e){this.findEvent(t)||this.events.push({name:t,callbacks:[e]})}findEvent(t){return this.events.find(e=>e.name===t)}log(t){n.log("EventBus.js | "+t,i.findLogLevel("events"))}reportEvents(){console.log("EventBus.js | reportEvents() : Registered `Events`..."),console.log(this.events)}};const r=new class{constructor(){}getElementById(t){let e=document.getElementById(t);return e||console.error("Element with ID of '"+t+"' not found!")}getElementByClass(t){let e=document.getElementsByClassName(t);return e.length>0?e[0]:console.error("Element with class name of '"+t+"' not found!")}rgbToColor(t,e,s,i=null){return null!=i?new BABYLON.Color4(t/255,e/255,s/255,i):new BABYLON.Color3(t/255,e/255,s/255)}getAlphaFromPixel(t,e){return t[4*e+3]}runCollection(t,e,s=null){if(t)for(var i=0;i<t.length;i++){let n=t[i];"function"==typeof n[e]&&n[e](s)}}getFromArrByName(t,e,s=!1){let i=s?[]:null;for(var n=0;n<t.length;n++){let a=t[n];if(a.name&&a.name.toLowerCase().indexOf(e.toLowerCase())>-1){if(!s)return a;i.push(a)}}return i}getLoopIteration(t,e){let s=e+1,i=s==t.length?0:s;return{curr:t[e],next:t[i]}}isObject(t){let e=typeof obj;return"function"===e||"object"===e&&!!obj}hasObject(t,e){for(var s=0;s<t.length;s++)if(t[s]===e)return!0;return!1}};const o=new class{constructor(){this.isStartGame=!1,this.isSpawning=!1,this.isPaused=!1,this.isDetecting=!1,this.hasDetection=!1,this.round={startTime:null,endTime:null,score:0},this.bindEvents()}detecting(t=!0){this.isDetecting=t}gameStart(t=!0){this.isStartGame=t,t?this.setCurrStartTime():(this.setCurrEndTime(),this.paused(!1))}paused(t=!0){this.isPaused=t}spawning(t=!0){this.isSpawning=t}addScore(t){this.round.score+=parseInt(t)}bindEvents(){a.register("onStartGame",()=>{this.gameStart()}),a.register("onPauseGame",t=>{this.paused(t)}),a.register("onEndGame",()=>{this.gameStart(!1)}),a.register("onHasDetection",()=>{this.hasDetection=!0}),a.register("onDetecting",t=>{this.detecting(t)}),a.register("onSpawnEnable",t=>{this.spawning(t)}),a.register("hasScored",t=>{this.addScore(t)})}getCurrScore(){return this.round.score}setCurrStartTime(t=null){let e=t||new Date;this.round.startTime=e}setCurrEndTime(t=null){let e=t||new Date;this.round.endTime=e}isPlaying(){return!(!this.isStartGame||this.isPaused)}};const h=new class{constructor(){this.minimizeWidth=600}init(){}};const c=new class{constructor(){this.minimizeClass="video--minimize",this.modelsUri="./face-detection-demo/assets/models",this.detectionInterval=100}init(){}};const l=new class{constructor(){this.activeClass="menu--active"}init(){}};const u=new class{constructor(){this.id="loading"}init(){}};const d=new class{constructor(){this.activeClass="label--active"}init(){}};class g{constructor(t,e){this.panelName=t,this.attributes=e,this._initGUI()}_initGUI(){this._setupLabels()}_setupLabels(){this.panel=r.getElementById(this.panelName)}show(){this.panel.classList.add(this.attributes.activeClass)}hide(){this.panel.classList.remove(this.attributes.activeClass)}}class m extends g{constructor(t){super(t,d),this._initLabel()}_initLabel(){}}class p extends m{constructor(){super(u.id),this.init()}init(){this.setupLabels(),this.bindEvents()}setupLabels(){}bindEvents(){}log(t){n.log("LoadingLabel.js | "+t,i.findLogLevel("elements"))}}const v=new class{constructor(){this.id="face-detection",this.minimizeClass="face-detection--minimize",this.waitingClass="face-detection--waiting",this.detectedClass="face-detection--detected",this.notDetectedClass="face-detection--not-detected"}init(){}};class w extends m{constructor(){super(v.id),this.init()}init(){this.bindEvents()}bindEvents(){a.register("onDetecting",t=>{this.onDetecting(t)})}onDetecting(t){t?this.detected():this.notDetected()}detected(){this.setClassname(v.detectedClass,v.notDetectedClass)}notDetected(){this.setClassname(v.notDetectedClass,v.detectedClass)}log(t){n.log("DetectLabel.js | "+t,i.findLogLevel("elements"))}setClassname(t,e){this.panel.classList.remove(e),this.panel.classList.add(t)}}const b=new class{constructor(){this.id="score",this.scoreClassName="score__label",this.comboClassName="combo__label"}init(){}};class x extends m{constructor(){super(b.id),this.init()}init(){this.setupLabels(),this.bindEvents()}setupLabels(){this.scoreLabel=r.getElementByClass(b.scoreClassName)}bindEvents(){a.register("hasScored",()=>{this.updateScore()})}updateScore(){this.scoreLabel.innerHTML=o.getCurrScore()}log(t){n.log("ScoreLabel.js | "+t,i.findLogLevel("elements"))}}const M=new class{constructor(){this.id="start-menu",this.startGameBtnId="startGame"}init(){}};class f extends g{constructor(t){super(t,l),this._initMenu()}_initMenu(){}createButtons(t,e){let s=r.getElementById(t);s&&s.addEventListener("click",t=>{t.preventDefault(),e()})}}class C extends f{constructor(){super(M.id),this.init()}init(){this.setupButtons(),this.bindEvents()}setupButtons(){this.startBtn=this.createButtons(M.startGameBtnId,()=>{this.startGame()})}bindEvents(){}startGame(){a.emit("onStartGame")}log(t){n.log("StartMenu.js | "+t,i.findLogLevel("elements"))}}class y{constructor(t,e){this.canvas=t,this.context=e,this.init()}init(){this.labels=[],this.menus=[],this.buildElements(),this.bindEvents(),this.show(this.labels,[this.loadingLabel])}buildElements(){this.loadingLabel=this.addLabel(new p),this.detectLabel=this.addLabel(new w),this.scoreLabel=this.addLabel(new x),this.startMenu=this.addMenu(new C)}addLabel(t){return this.addToCollection(this.labels,t)}addMenu(t){return this.addToCollection(this.menus,t)}addToCollection(t,e){return t.push(e),e}bindEvents(){a.register("onHasDetection",()=>{this.onHasDetection()}),a.register("onStartGame",()=>{this.onStartGame()})}onHasDetection(){this.show(this.labels,[]),this.show(this.menus,[this.startMenu])}onStartGame(){this.show(this.menus,[]),this.show(this.labels,[this.expressionLabel,this.detectLabel,this.scoreLabel])}show(t,e){for(var s=0;s<t.length;s++){let i=t[s];r.hasObject(e,i)?i.show():i.hide()}}minimize(){r.runCollection(this.menus,"minimize"),r.runCollection(this.labels,"minimize")}maximize(){r.runCollection(this.menus,"maximize"),r.runCollection(this.labels,"maximize")}update(){}draw(){}}const S=new class{constructor(){this.moveDuration=150}init(){}};class L{constructor(t,e){this.x=t,this.y=e}clear(){this.x=0,this.y=0}normalize(){let t=this.getLength();t>0&&(this.x=this.x/t,this.y=this.y/t)}add(t){return new L(this.x+t.x,this.y+t.y)}subtract(t){return new L(this.x-t.x,this.y-t.y)}multiply(t){return new L(this.x*t,this.y*t)}divide(t){return new L(this.x/t,this.y/t)}addTo(t){this.x+=t.x,this.y+=t.y}subtractTo(t){this.x-=t.x,this.y-=t.y}multiplyBy(t){this.x*=t,this.y*=t}divideBy(t){this.x/=t,this.y/=t}setAngle(t){let e=this.getLength();this.x=Math.cos(t)*e,this.y=Math.sin(t)*e}getAngle(){return Math.atan2(this.y,this.x)}setLength(t){let e=this.getAngle();this.x=Math.cos(e)*t,this.y=Math.sin(e)*t}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}}class D{constructor(t,e){this.video=t,this.body=e,i.showMouse()?this.bindDebugMouse():this.init()}init(){this.loading=!1,this.setupAssets(),this.hasDebugCanvas=!1}setupAssets(){Promise.all([faceapi.nets.tinyFaceDetector.loadFromUri(c.modelsUri),faceapi.nets.faceLandmark68Net.loadFromUri(c.modelsUri)]).then(()=>{this.setupStream()})}setupStream(){void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(t){return navigator.webkitGetUserMedia||navigator.mozGetUserMedia?new Promise((function(e,s){getUserMedia.call(navigator,t,e,s)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(t=>{"srcObject"in this.video?this.video.srcObject=t:this.video.src=window.URL.createObjectURL(t),this.video.onloadedmetadata=()=>{this.stream()}}).catch(t=>{console.log("We encountered an error trying to access your camera. Please allow the app permission to continue. "+t)})}onWindowResize(t){this.video.width=t.width,this.video.height=t.height}stream(){this.video.play(),this.video.addEventListener("play",()=>{setInterval(async()=>{this.detect()},c.detectionInterval)})}detect(){this.loading||(this.loading=!0,faceapi.detectSingleFace(this.video,new faceapi.TinyFaceDetectorOptions({scoreThreshold:.4})).withFaceLandmarks().then(t=>{this.debugCanvas&&this.debugCanvas.getContext("2d").clearRect(0,0,this.debugCanvas.width,this.debugCanvas.height),t?this.setDetections(t):o.isDetecting&&a.emit("onDetecting",!1),this.loading=!1,o.hasDetection||a.emit("onHasDetection")},t=>{this.log("ERROR: "+t)}))}log(t){n.log("FaceDetect.js | "+t,i.findLogLevel("elements"))}setDetections(t){this.detections=t,a.emit("onFaceDetect",t),o.isDetecting||a.emit("onDetecting",!0),i.showMarkers()&&this.showFaceMarkers(t)}getVideoSize(){return{width:this.video.width,height:this.video.height}}bindDebugMouse(){a.emit("onHasDetection",!0),a.emit("onDetection",!0),this.body.addEventListener("mousemove",t=>{let e={landmarks:{}},s=t.clientX-this.body.offsetLeft,i=t.clientY-this.body.offsetTop;e.landmarks.getMouth=()=>{let t=[];return t.push(new L(s-40,i)),t.push(new L(s-20,i-7)),t.push(new L(s-10,i-14)),t.push(new L(s,i-3.5)),t.push(new L(s+10,i-14)),t.push(new L(s+20,i-7)),t.push(new L(s+40,i)),t.push(new L(s+20,i+7)),t.push(new L(s+10,i+14)),t.push(new L(s,i+14)),t.push(new L(s-10,i+14)),t.push(new L(s-20,i+7)),t.push(new L(s-40+10,i)),t.push(new L(s-10,i-10)),t.push(new L(s,i-10)),t.push(new L(s+10,i-10)),t.push(new L(s+40-10,i)),t.push(new L(s+10,i+10)),t.push(new L(s,i+10)),t.push(new L(s-10,i+10)),t},a.emit("onFaceDetect",e)})}createDebugCanvas(){this.debugCanvas=faceapi.createCanvasFromMedia(this.video),this.body.append(this.debugCanvas),faceapi.matchDimensions(this.debugCanvas,this.getVideoSize()),this.hasDebugCanvas=!0}showFaceMarkers(t){this.hasDebugCanvas||this.createDebugCanvas();const e=faceapi.resizeResults(t,this.getVideoSize());i.showLandmarks()&&faceapi.draw.drawFaceLandmarks(this.debugCanvas,e)}}class I{constructor(t,e,s,i,n=null,a=null){for(var r in this.obj=t,this.props=e,this.duration=s,this.easingFunc=i,this.onProgress=n,this.onComplete=a,this.starts={},this.changes={},this.startTime=new Date,this.props)this.hasProp(r)&&(this.starts[r]=this.obj[r],this.changes[r]=this.props[r]-this.starts[r]);this.start()}start(){this.remainingTime=new Date-this.startTime,this.remainingTime<this.duration?(this.update(),this.onProgress&&this.onProgress(),requestAnimationFrame(()=>{this.start()})):(this.remainingTime=this.duration,this.update(),this.onComplete&&this.onComplete())}update(){for(var t in this.props)this.hasProp(t,!1)&&(this.obj[t]=this.easingFunc(this.remainingTime,this.starts[t],this.changes[t],this.duration))}hasProp(t,e=!0){return!!this.obj.hasOwnProperty(t)||(e&&console.warn("[Warning] Tween.js : Property of `"+t+"` not found"),!1)}static linearTween(t,e,s,i){return s*t/i+e}static easeInQuad(t,e,s,i){return s*(t/=i)*t+e}static easeOutQuad(t,e,s,i){return-s*(t/=i)*(t-2)+e}static easeInOutQuad(t,e,s,i){return(t/=i/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e}static easeInCubic(t,e,s,i){return s*(t/=i)*t*t+e}static easeOutCubic(t,e,s,i){return s*((t=t/i-1)*t*t+1)+e}static easeInOutCubic(t,e,s,i){return(t/=i/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e}static easeInQuart(t,e,s,i){return s*(t/=i)*t*t*t+e}static easeOutQuart(t,e,s,i){return-s*((t=t/i-1)*t*t*t-1)+e}static easeInOutQuart(t,e,s,i){return(t/=i/2)<1?s/2*t*t*t*t+e:-s/2*((t-=2)*t*t*t-2)+e}static easeInQuint(t,e,s,i){return s*(t/=i)*t*t*t*t+e}static easeOutQuint(t,e,s,i){return s*((t=t/i-1)*t*t*t*t+1)+e}static easeInOutQuint(t,e,s,i){return(t/=i/2)<1?s/2*t*t*t*t*t+e:s/2*((t-=2)*t*t*t*t+2)+e}static easeInSine(t,e,s,i){return-s*Math.cos(t/i*(Math.PI/2))+s+e}static easeOutSine(t,e,s,i){return s*Math.sin(t/i*(Math.PI/2))+e}static easeInOutSine(t,e,s,i){return-s/2*(Math.cos(Math.PI*t/i)-1)+e}static easeInExpo(t,e,s,i){return 0==t?e:s*Math.pow(2,10*(t/i-1))+e}static easeOutExpo(t,e,s,i){return t==i?e+s:s*(1-Math.pow(2,-10*t/i))+e}static easeInOutExpo(t,e,s,i){return 0==t?e:t==i?e+s:(t/=i/2)<1?s/2*Math.pow(2,10*(t-1))+e:s/2*(2-Math.pow(2,-10*--t))+e}static easeInCirc(t,e,s,i){return-s*(Math.sqrt(1-(t/=i)*t)-1)+e}static easeOutCirc(t,e,s,i){return s*Math.sqrt(1-(t=t/i-1)*t)+e}static easeInOutCirc(t,e,s,i){return(t/=i/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+e:s/2*(Math.sqrt(1-(t-=2)*t)+1)+e}static easeInElastic(t,e,s,i){var n=1.70158,a=0,r=s;if(0==t)return e;if(1==(t/=i))return e+s;if(a||(a=.3*i),r<Math.abs(s)){r=s;n=a/4}else n=a/(2*Math.PI)*Math.asin(s/r);return-r*Math.pow(2,10*(t-=1))*Math.sin((t*i-n)*(2*Math.PI)/a)+e}static easeOutElastic(t,e,s,i){var n=1.70158,a=0,r=s;if(0==t)return e;if(1==(t/=i))return e+s;if(a||(a=.3*i),r<Math.abs(s)){r=s;n=a/4}else n=a/(2*Math.PI)*Math.asin(s/r);return r*Math.pow(2,-10*t)*Math.sin((t*i-n)*(2*Math.PI)/a)+s+e}static easeInOutElastic(t,e,s,i){var n=1.70158,a=0,r=s;if(0==t)return e;if(2==(t/=i/2))return e+s;if(a||(a=i*(.3*1.5)),r<Math.abs(s)){r=s;n=a/4}else n=a/(2*Math.PI)*Math.asin(s/r);return t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*i-n)*(2*Math.PI)/a)*-.5+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*i-n)*(2*Math.PI)/a)*.5+s+e}static easeInBack(t,e,s,i,n){return null==n&&(n=1.70158),s*(t/=i)*t*((n+1)*t-n)+e}static easeOutBack(t,e,s,i,n){return null==n&&(n=1.70158),s*((t=t/i-1)*t*((n+1)*t+n)+1)+e}static easeInOutBack(t,e,s,i,n){return null==n&&(n=1.70158),(t/=i/2)<1?s/2*(t*t*((1+(n*=1.525))*t-n))+e:s/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e}static easeInBounce(t,e,s,i){return s-I.easeOutBounce(i-t,0,s,i)+e}static easeOutBounce(t,e,s,i){return(t/=i)<1/2.75?s*(7.5625*t*t)+e:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+e:s*(7.5625*(t-=2.625/2.75)*t+.984375)+e}static easeInOutBounce(t,e,s,i){return t<i/2?.5*I.easeInBounce(2*t,0,s,i)+e:.5*I.easeOutBounce(2*t-i,0,s,i)+.5*s+e}}class E{constructor(t){this._init()}_init(){}setupCanvasVars(){}setupSize(){}onWindowResize(t){this.setupSize(t),this.setupCanvasVars()}}class P extends E{constructor(t,e){super(),this.canvas=t,this.context=e,this.init()}init(){this.resetCoordinates(),this.duration=S.moveDuration,this.bindEvents()}bindEvents(){a.register("onFaceDetect",t=>{this.onFaceDetect(t)})}onFaceDetect(t){t?this.setCoordinates(t):this.reset()}move(){this.updateCoordinates(this.currMouth,this.goalMouth)}resetCoordinates(){this.currMouth=[],this.goalMouth=[]}updateCoordinates(t,e){for(var s=0;s<t.length;s++){let i=t[s],n=e[s];new I(i,{x:n.x,y:n.y},this.duration,I.easeOutQuad)}}update(){}drawPoly(t){if(0!=t.length){this.context.save(),this.context.fillStyle="white",this.context.beginPath();for(var e=0;e<t.length;e++){let s=t[e],i=s.x,n=s.y;0==e?this.context.moveTo(i,n):this.context.lineTo(i,n)}this.context.closePath(),this.context.fill(),this.context.restore()}}draw(){this.drawPoly(this.currMouth)}log(t){n.log("User.js | "+t,i.findLogLevel("elements"))}getInnerMouth(){return this.currMouth.length?this.currMouth.slice(12,20):[]}setCoordinates(t){let e=faceapi.resizeResults(t,this.getCanvasSize());e.landmarks&&this.setLandmarks(e.landmarks)}setLandmarks(t){this.setPartCoordinates("goalMouth","currMouth",t.getMouth()),this.move()}setPartCoordinates(t,e,s){i.showMouse()?this[t]=s:this[t]=this.getVector2FromPoint(s),0==this[e].length&&(this[e]=this[t])}getVector2FromPoint(t){let e=[];for(var s=0;s<t.length;s++){let i=t[s];e.push(new L(i.x,i.y))}return e}getCanvasSize(){return{width:this.canvas.width,height:this.canvas.height}}}const T=new class{constructor(){this.gravity=.25,this.radius=50,this.sides=6,this.slice=Math.PI/this.sides,this.rotSpeedMin=.01,this.rotSpeedMax=.09,this.defaultColor="#f9ca24"}};class B{static quadraticBezier(t,e,s,i,n){t.x=Math.pow(1-n,2)*e.x+2*(1-n)*n*s.x+n*n*i.x,t.y=Math.pow(1-n,2)*e.y+2*(1-n)*n*s.y+n*n*i.y}static cubicBezier(t,e,s,i,n,a){t.x=Math.pow(1-a,3)*e.x+3*Math.pow(1-a,2)*a*s.x+3*(1-a)*a*a*i.x+a*a*a*n.x,t.y=Math.pow(1-a,3)*e.y+3*Math.pow(1-a,2)*a*s.y+3*(1-a)*a*a*i.y+a*a*a*n.y}static randomInt(t,e,s=!0){let i=t+Math.random()*(e-t);return s?Math.floor(i):i}static lerp(t,e,s){return(s-e)*t+e}static clamp(t,e,s){return Math.min(Math.max(t,e),s)}static percentOf(t,e){return t*(e/100)}static radianToDegrees(t){return 180*t/Math.PI}static degreeToRadians(t){return t*Math.PI/180}static inRange(t,e,s){return t>=Math.min(e,s)&&t<=Math.max(e,s)}static rangeIntersect(t,e,s,i){return Math.max(t,e)>=Math.min(s,i)&&Math.min(t,e)<=Math.max(s,i)}static isLineIntersecting(t,e,s,i){return B.getCCW(t,s,i)!=B.getCCW(e,s,i)&&B.getCCW(t,e,s)!=B.getCCW(t,e,i)}static getCCW(t,e,s){return(s.y-t.y)*(e.x-t.x)>(e.y-t.y)*(s.x-t.x)}}const O=new class{constructor(){this.interval=7e3,this.minInterval=1500,this.margin=20,this.itemSpeedMin=12,this.itemSpeedMax=17,this.itemDirectionMin=-Math.PI/5,this.itemDirectionMax=-Math.PI/3}getSpawnCoordinates(t,e=0){let s=B.percentOf(t.height,this.margin);return{minX:0-e,maxX:0+e,minY:s-e,maxY:t.height-s+e}}};class z extends E{constructor(t,e,s,i,n){super(),this.canvas=t,this.context=e,this.setPosition(s),this.gravity=new L(0,T.gravity),this.velocity=new L(0,0),this.velocity.setLength(i),this.velocity.setAngle(n),this.init()}init(){this.points=[],this.color=T.defaultColor,this.currAngle=0,this.rotSpeed=B.randomInt(T.rotSpeedMin,T.rotSpeedMax,!1),this.toggled=!1,this.active=!0,this.onWindowResize(),this.bindEvents()}setupCanvasVars(){}bindEvents(){}toggle(t=!0){this.toggled=t,this.active=!t}updateRotation(){this.currAngle+=this.rotSpeed}update(){this.updateRotation(),this.velocity.addTo(this.gravity),this.position.addTo(this.velocity),this.setPoints()}drawPoly(){this.context.save(),this.context.fillStyle=this.color,this.context.lineWidth=10,this.context.shadowBlur=15,this.context.shadowColor=this.color,this.context.translate(this.position.x,this.position.y),this.context.rotate(this.currAngle),this.context.beginPath();for(var t=0;t<this.points.length;t++){let e=this.points[t],s=this.position.x-e.x,i=this.position.y-e.y;0==t?this.context.moveTo(s,i):this.context.lineTo(s,i)}this.context.closePath(),this.context.fill(),this.context.restore()}draw(){this.toggled||this.drawPoly()}log(t){n.log("Item.js | "+t,i.findLogLevel("elements"))}setPosition(t){this.position=t,this.setPoints()}setPoints(){this.points||(this.points=[]);for(var t=0;t<T.sides;t++){let e=2*t*T.slice,s=this.position.x+Math.cos(e)*T.radius,i=this.position.y+Math.sin(e)*T.radius;this.points[t]=new L(s,i)}}isDead(){return!!this.toggled||(this.position.x-this.radius>this.canvas.width||this.position.y-this.radius>this.canvas.height)}}class j extends E{constructor(t,e){super(),this.canvas=t,this.context=e,this.init()}init(){this.items=[],this.lastSpawnType=null,this.delta=0,this.interval=0,this.bindEvents()}setupCanvasVars(){this.spawnCoords=O.getSpawnCoordinates(this.canvas)}createItem(){let t=new z(this.canvas,this.context,this.getSpawnLocation(),this.getSpawnSpeed(),this.getSpawnDirection());this.items.push(t)}bindEvents(){a.register("onStartGame",()=>{this.enable()}),a.register("onPauseGame",()=>{this.enable(!1)}),a.register("onEndGame",()=>{this.enable(!1)})}enable(t=!0){this.createItem(),a.emit("onSpawnEnable",t)}spawn(t){let e=!1;this.hasItems()||(e=!0),this.delta+=t,this.interval=this.getSpawnInterval(),this.delta>this.interval&&(e=!0),e&&(this.createItem(),this.delta=0)}update(t){if(o.isPlaying()){for(var e=0;e<this.items.length;e++){let t=this.items[e];t.isDead()?this.items.splice(e,1):t.update()}o.isSpawning&&this.spawn(t)}}draw(){o.isPlaying()&&r.runCollection(this.items,"draw")}log(t){n.log("ItemSpawner.js | "+t,i.findLogLevel("elements"))}getSpawnLocation(){return new L(B.randomInt(this.spawnCoords.minX,this.spawnCoords.maxX,!1),B.randomInt(this.spawnCoords.minY,this.spawnCoords.maxY,!1))}getSpawnSpeed(){return B.randomInt(O.itemSpeedMin,O.itemSpeedMax,!1)}getSpawnDirection(){return B.randomInt(O.itemDirectionMin,O.itemDirectionMax,!1)}getSpawnInterval(){let t=o.getCurrScore(),e=0;return(e=O.interval-t)<O.minInterval&&(e=O.minInterval),e}hasItems(){if(!this.items.length)return!1;for(var t=0;t<this.items.length;t++){if(this.items[t].active)return!0}return!1}}const k=new class{constructor(){this.sides=2,this.gravity=.25,this.rotSpeedMin=.01,this.rotSpeedMax=.09}};const F=new class{constructor(){this.interval=7e3,this.minInterval=1500,this.margin=20,this.particleSpeedMin=5,this.particleSpeedMax=7,this.particleDirectionMin=-Math.PI/2.5,this.particleDirectionMax=-Math.PI/1.5}};class G extends E{constructor(t,e,s,i,n){super(),this.canvas=t,this.context=e,this.position=s,this.gravity=new L(0,k.gravity),this.velocity=new L(0,0),this.velocity.setLength(i),this.velocity.setAngle(n),this.init()}init(){this.points=[],this.color=T.defaultColor,this.sides=k.sides,this.radius=T.radius,this.currAngle=0,this.rotSpeed=B.randomInt(k.rotSpeedMin,k.rotSpeedMax,!1),this.setPoints(),this.bindEvents()}setupCanvasVars(){}bindEvents(){}updateRotation(){this.currAngle+=this.rotSpeed}update(){this.updateRotation(),this.velocity.addTo(this.gravity);for(var t=0;t<this.points.length;t++)this.points[t].addTo(this.velocity)}drawPoly(){this.context.save(),this.context.fillStyle=this.color,this.context.lineWidth=10,this.context.shadowBlur=15,this.context.shadowColor=this.color,this.context.beginPath();for(var t=0;t<this.points.length;t++){let e=this.points[t],s=e.x,i=e.y;0==t?this.context.moveTo(s,i):this.context.lineTo(s,i)}this.context.closePath(),this.context.fill(),this.context.restore()}draw(){this.drawPoly()}log(t){n.log("Particle.js | "+t,i.findLogLevel("elements"))}setPoints(){let t=this.radius/2,e=this.radius,s=Math.PI;this.points.push(new L(this.position.x,this.position.y));for(var i=0;i<this.sides;i++){let i=B.randomInt(0,s,!1),n=B.randomInt(t,e,!1),a=Math.cos(i)*n,r=Math.sin(i)*n;this.points.push(new L(this.position.x+a,this.position.y+r))}}isDead(){return this.points[0].x>this.canvas.width||this.points[0].y>this.canvas.height}}class R extends E{constructor(t,e){super(),this.canvas=t,this.context=e,this.init()}init(){this.particles=[],this.bindEvents()}createParticle(t){let e=new G(this.canvas,this.context,t,this.getSpawnSpeed(),this.getSpawnDirection());this.particles.push(e)}bindEvents(){}spawn(t){this.createParticle(t)}update(t){if(o.isPlaying())for(var e=0;e<this.particles.length;e++){let t=this.particles[e];t.isDead()?this.particles.splice(e,1):t.update()}}draw(){o.isPlaying()&&r.runCollection(this.particles,"draw")}log(t){n.log("ParticleSpawner.js | "+t,i.findLogLevel("elements"))}getSpawnSpeed(){return B.randomInt(F.particleSpeedMin,F.particleSpeedMax,!1)}getSpawnDirection(){return B.randomInt(F.particleDirectionMin,F.particleDirectionMax,!1)}}new class{constructor(){}};class A extends E{constructor(t,e,s,i,n){super(),this.canvas=t,this.context=e,this.user=s,this.itemSpawner=i,this.particleSpawner=n,this.init()}init(){this.particles=[],this.bindEvents()}setupCanvasVars(){}bindEvents(){}collided(t){t.toggle();for(var e=0;e<5;e++)this.particleSpawner.spawn(t.position);a.emit("hasScored",200)}update(){if(o.isPlaying()){for(var t=0;t<this.itemSpawner.items.length;t++){let e=this.itemSpawner.items[t];e.active&&this.isCollision(e)&&this.collided(e)}r.runCollection(this.particles,"update")}}draw(){o.isPlaying()&&r.runCollection(this.particles,"draw")}log(t){n.log("UserItem.js | "+t,i.findLogLevel("elements"))}isCollision(t){let e=this.user.getInnerMouth(),s=t.points;for(var i=0;i<s.length;i++){let t=r.getLoopIteration(s,i);for(var n=0;n<e.length;n++){let s=r.getLoopIteration(e,n);if(B.isLineIntersecting(t.curr,t.next,s.curr,s.next))return!0}}return!1}}class U{constructor(t,e,s){this.body=t,this.video=e,this.canvas=s,this.context=this.getCanvasContext(),this.init(),this.reportDevTools()}init(){this.elements=[],this.setupStates(),this.setupStage(),this.buildElements(),this.bindEvents(),this.render()}setupStates(){}setupStage(){this.fps=60,this.time={interval:1e3/this.fps,lastTime:(new Date).getTime(),currentTime:0,delta:0}}buildElements(){this.guiManager=this.addToElem(new y(this.canvas,this.context)),this.faceDetect=this.addToElem(new D(this.video,this.body)),this.user=this.addToElem(new P(this.canvas,this.context)),this.itemSpawner=this.addToElem(new j(this.canvas,this.context)),this.particleSpawner=this.addToElem(new R(this.canvas,this.context)),this.userItem=this.addToElem(new A(this.canvas,this.context,this.user,this.itemSpawner,this.particleSpawner))}addToElem(t){return this.elements.push(t),t}bindEvents(){}onWindowResize(){let t=this.body.offsetHeight,e=this.body.offsetWidth;this.canvas.width=e,this.canvas.height=t,e>h.minimizeWidth?r.runCollection(this.elements,"minimize"):r.runCollection(this.elements,"maximize"),r.runCollection(this.elements,"onWindowResize",{width:e,height:t})}update(t){r.runCollection(this.elements,"update",t)}clearCanvas(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}draw(t){r.runCollection(this.elements,"draw",t)}render(){this.time.currentTime=(new Date).getTime(),this.time.delta=this.time.currentTime-this.time.lastTime,this.time.delta>this.time.interval&&(this.clearCanvas(),this.update(this.time.delta),this.draw(this.time.delta),this.time.lastTime=this.time.currentTime-this.time.delta%this.time.interval),requestAnimationFrame(()=>{this.render()})}getCanvasContext(){return this.canvas?this.canvas.getContext("2d"):null}reportDevTools(){n.canLog(i.findLogLevel("events"))&&a.reportEvents()}}!function(){const t=document.getElementById("main"),e=document.getElementById("video"),s=document.getElementById("canvas"),i=new U(t,e,s);function n(){i.onWindowResize()}window.onresize=n,n()}()}},[[11,1,3,2]]]);